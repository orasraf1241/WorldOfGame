pipeline {
    agent any
    stages {
            stage('GIt checkout') {
                steps {
                    git branch: 'master',
                    credentialsId: 'orasraf1241',
                    url: 'https://github.com/orasraf1241/WorldOfGame.git'
                }
            }

            stage('building docker file ') {
                steps {
                    sh 'sudo docker build . -t world_of_game'
                }
            }

            stage('Run docker image') {
                agent {
                    docker  {
                        image 'world_of_game'
                        reuseNode true
                    }
                }
                steps {
                      sh 'python3 MainGame.py &'
                      sh 'ls'
                      sh 'pwd'
                      sleep 5
                      sh 'python3 tests/e2e.py'
                }
            }
        }
    }


